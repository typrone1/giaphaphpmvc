{% extends "base_user.html" %}
{% block title %}
Trang chủ
{% endblock %}
{% block external_css %}
<script src="/js/amlich-hnd.js" type="text/javascript"></script>
<style>
    table {
        width: 100%;
    }
    .cal1 .clndr .clndr-table tr .day {
        height: 0;
    }
    .clndr .clndr-controls {
        padding: 0 !important;
        line-height: 2em;
        background: linear-gradient(to bottom, rgba(243,197,189,1) 0%,rgba(232,108,87,1) 50%,rgba(234,40,3,1) 51%,rgba(255,102,0,1) 75%,rgba(199,34,0,1) 100%);
    }
</style>
<link rel="stylesheet" href="/css/clndr.css">
{% endblock %}
{% block body %}

<section class="content clearfix">
    <div class="container" style="background-image: url('/images/spiration-light.png'); overflow: hidden">
        <div class="search-bar clearfix">
            <ul class="breadcrumb left clearfix">
                <li class="start">
                    <h4>
                        <a href="javascript:void(0);" title="Trang chủ">Trang chủ</a>
                    </h4>
                </li>
            </ul>
            <div id="search-box">
                <form action="/ket-qua-tim-kiem" method="get" id="search">
                    <input type="text" name="keywords">
                    <input type="submit" value="Tìm kiếm">
                </form>
            </div>
        </div>
        <br>
        <div class="col-9">
            {% for baiViet in dsBaiViet|slice(0, 1) %}
            <div class="col-9">
                <div id="big-news" style="padding-left: .5em">
                    <div class="thumb">
                        <a href="/bai-viet/{{baiViet.MaBaiViet}}">
                            {% if baiViet.HinhAnh is not null and baiViet.HinhAnh != '' %}
                            <img src="/images/AnhBaiViet/{{baiViet.HinhAnh}}" alt="">
                            {% else %}
                            <img src="/images/AnhBaiViet/camera.png" alt="">
                            {% endif %}
                        </a>
                    </div>
                    <h5><a href="/bai-viet/{{baiViet.MaBaiViet}}">{{baiViet.TieuDe}}</a></h5>
                    <small>
                        <i>{{baiViet.name}}</i> - Ngày viết: {{baiViet.NgayDuaTin|date("d/m/Y")}}
                    </small>
                    <p>{{ rutGonHTML(baiViet.NoiDung) |slice(0, 200) ~ '...' }}</p>
                </div>
            </div>
            {% endfor %}

            <div class="col-3" id="bai-viet-gan">
                <div class="header-box">
                    <h4>
                        <i class="fa fa-address-book"></i> Bài viết gần đây</h4>
                </div>
                <div id="danh-sach">
                    {% for baiViet in dsBaiViet|slice(1, dsBaiViet|length ) %}
                    <div class="article">
                        <a href="/bai-viet/{{baiViet.MaBaiViet}}">
                            <a href="/bai-viet/{{baiViet.MaBaiViet}}">
                                <h5>{{baiViet.TieuDe}}<br><small><i>{{baiViet.name}}</i> - Ngày viết: {{baiViet.NgayDuaTin|date("d/m/Y")}}</small></h5>

                            </a>
                        </a>
                        <small>{{ rutGonHTML(baiViet.NoiDung) |slice(0, 200) ~ '...' }}</small>
                        <hr>
                    </div>
                    {% endfor %}
                </div>
            </div>
            <a href="/user/LoaiTin/index/1" class="view-all">Xem tất cả
                <i class="fa fa-arrow-right"></i>
            </a>
        </div>
        <div class="col-3 clearfix">
            <script>
                var mockData = [{
                    "ngayGio": "2015-11-29"
                    },
                    {
                        "ngayGio": "2017-09-20"
                    },
                    {
                        "ngayGio": "2014-06-15"
                    },
                    {
                        "ngayGio": "2015-01-10"
                    },
                    {
                        "ngayGio": "2015-02-23"
                    }
                ];
                var getJSON = function(url, callback) {
                    var xhr = new XMLHttpRequest();
                    xhr.open('GET', url, true);
                    xhr.responseType = 'json';
                    xhr.onload = function() {
                        var status = xhr.status;
                        if (status === 200) {
                            callback(null, xhr.response);
                        } else {
                            callback(status, xhr.response);
                        }
                    };
                    xhr.send();
                };
                getJSON('/api/ajax/getAll', (err, data) => {
                    mockData = data.data;
                });
                setTimeout(function () {
                    console.log(mockData);
                }, 1000);
                setOutputSize("small");
                showVietCal();
            </script>
            <table align="center" cellspacing="1" border="0">

                <tr>
                    <td align="center">
                        <div class="cal1">
                            <div id="lich" class="clndr"></div>
                        </div>
                        <script language="JavaScript">
                            document.getElementById('lich').innerHTML = printSelectedMonth();
                        </script>
                    </td>
                </tr>

                <tr>
                    <td align="center">
                        <form name="SelectMonth" action="">
                            Th&aacute;ng
                            <select name="month">
                                <option value="1">1
                                <option value="2">2
                                <option value="3">3
                                <option value="4">4
                                <option value="5">5
                                <option value="6">6
                                <option value="7">7
                                <option value="8">8
                                <option value="9">9
                                <option value="10">10
                                <option value="11">11
                                <option value="12">12
                            </select> &#160;&#160;&#160;&#160; N&#x103;m
                            <INPUT NAME="year" size=4 value="2005"> &#160;

                            <p>

                                <input type="button" value="Xem l&#x1ECB;ch th&aacute;ng" onClick="javascript:viewMonth(parseInt(month.value), parseInt(year.value));"> &#160;&#160;
                        </form>

                        <script type="text/javascript">


                            for (var i = mockData.length - 1; i >= 0; i--) {
                                var timestamp = Date.parse(mockData[i].ngayGio)
                                if (isNaN(timestamp) == false) {
                                    var d = new Date(timestamp);
                                    console.log(d.getDate() + "/" + d.getMonth());
                                }
                            }

                            getSelectedMonth();
                            document.SelectMonth.month.value = currentMonth;
                            document.SelectMonth.year.value = currentYear;

                            function viewMonth(mm, yy) {
                                window.location = window.location.pathname + '?yy=' + yy + '&mm=' + mm;
                            }

                            // function viewYear(yy) {
                            // 	var loc = 'currentyear.html?yy=' + yy;
                            // 	var win2702 = window.open(loc, "win2702", "menubar=yes,scrollbars=yes,resizable=yes");
                            // }
                        </script>

                    </td>
                </tr>

            </table>


        </div>
        <div>
            <div id="su-kien">
                <div class="header-box">
                    <h4>
                        <i class="fa fa-address-book"></i> Sự kiện - Tin tức</h4>
                </div>
                <article class="list-events">
                    {% for baiViet in dsBaiViet|slice(0, 3) %}
                    <div class="event">
                        <h5 class="title-events">
                            <a href="/bai-viet/{{baiViet.MaBaiViet}}">{{baiViet.TieuDe}}</a>
                        </h5>
                        <div class="thumb-su-kien" style="float: left">
                            <a href="/bai-viet/{{baiViet.MaBaiViet}}">
                                {% if baiViet.HinhAnh is not null and baiViet.HinhAnh != '' %}
                                <img style="min-width: 100%; height: 100%; float: left" src="/images/AnhBaiViet/{{ baiViet.HinhAnh }}" alt="">
                                {% else %}
                                <img style="min-width: 100%; height: 100%; float: left" src="/images/AnhBaiViet/camera.png" alt="">
                                {% endif %}
                            </a>
                        </div>
                        <small><i>{{baiViet.name}}</i> - Ngày viết: {{baiViet.NgayDuaTin|date("d/m/Y")}}</small>
                        <p class="description">{{ rutGonHTML(baiViet.NoiDung) |slice(0, 200) ~ '...' }}</p>
                    </div>
                    <div class="clearfix"></div>
                    {% endfor %}

                </article>
                <a href="/user/LoaiTin/index/1" class="view-all">Xem tất cả
                    <i class="fa fa-arrow-right"></i>
                </a>
            </div>
        </div>
    </div>
</section>
{% endblock %}